<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>S.L.E.R. - App Oficial - Jonatan Ribot</title>
    <meta name="description" content="Software oficial S.L.E.R. Método de lectura veloz con isometría. Registrado por Jonatan Ribot en 2025.">
    <meta name="author" content="Ribot Jonatan">

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body { background-color: #f3f4f6; font-family: sans-serif; }
        .sler-output-area {
            font-family: 'Courier New', Courier, monospace;
            white-space: pre;
            line-height: 1.6;
            background: #ffffff;
            color: #1f2937;
            /* Peso normal para coincidir con el Test y el Chat */
            font-weight: 400; 
        }
        .bloque-sler {
            border-left: 4px solid #3b82f6;
            padding-left: 1.5rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function MobileSLERApp() {
            const [text, setText] = useState('');
            const [isSlerActive, setIsSlerActive] = useState(false);
            const [showPrintModal, setShowPrintModal] = useState(false);
            const [printWidth, setPrintWidth] = useState(30);
            const ANCHO_MOLDE = 30; // Isometría estricta IP 2025

            // --- ALGORITMO MADRE: SEGMENTACIÓN, GUIONADO Y ZIG-ZAG ---
            const motorSLER = (input, ancho) => {
                if (!input) return "";
                let palabras = input.trim().split(/\s+/);
                let lineas = [];
                let lineaActual = "";

                for (let i = 0; i < palabras.length; i++) {
                    let p = palabras[i];
                    let espacioDisp = ancho - lineaActual.length - (lineaActual ? 1 : 0);

                    if (p.length <= espacioDisp) {
                        lineaActual += (lineaActual ? " " : "") + p;
                    } else if (p.length > 6 && espacioDisp >= 3) {
                        // REGLA DE GUIONES: Mínimo 2 letras por sílaba (no letras solas)
                        let corte = espacioDisp - 1; 
                        if (corte < 2) corte = 2;
                        if (p.length - corte < 2) corte = p.length - 2;

                        let parte1 = p.substring(0, corte) + "-";
                        let parte2 = p.substring(corte);
                        
                        lineaActual += (lineaActual ? " " : "") + parte1;
                        lineas.push(lineaActual.padEnd(ancho, '.'));
                        lineaActual = parte2;
                    } else {
                        lineas.push(lineaActual.padEnd(ancho, '.'));
                        lineaActual = p;
                    }
                }
                if (lineaActual) lineas.push(lineaActual.padEnd(ancho, '.'));

                // TRANSFORMACIÓN RECÍPROCA (ZIG-ZAG)
                return lineas.map((lin, idx) => {
                    const esPar = idx % 2 !== 0;
                    if (esPar) {
                        // Línea Recíproca: Inversión y anclaje inicial
                        const invertida = lin.split('').reverse().join('');
                        return "......" + invertida; 
                    } else {
                        // Línea Madre: Flujo normal y anclaje final
                        return lin + "......";
                    }
                }).join('\n');
            };

            const handleKeyDown = (e) => {
                // Bloqueo de Enter: Obliga a completar la isometría de 30
                if (e.key === "Enter") {
                    if (text.length % ANCHO_MOLDE !== 0) {
                        e.preventDefault();
                        alert("
